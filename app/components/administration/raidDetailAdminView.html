<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">A Necessary Loot System</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">Raid Administration</a>
                </li>

                <li class="dropdown">
                    <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Adminstration <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="#">Administrate Players</a>
                        </li>
                        <li><a href="#">Administrate Items</a>
                        </li>
                        <li><a href="#">Administrate Instances</a>
                        </li>
                        <li><a href="#/raidManagement">Administrate Raids</a>
                        </li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">Change Settings</a>
                        </li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">Statistics</a>
                        </li>
                        <li><a href="#">View Items</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="jumbotron">
    <div class="container">
        <h1>Raid Detail <small>{{vm.instance}}, {{vm.start}}</small></h1>
        <p>Administrate raid.</p>
    </div>
</div>

<div class="container">
    <!-- Example row of columns -->
    <div class="row">
        <div class="col-lg-12">
            <alert ng-show="vm.errorOccured" type="danger" close="vm.errorOccured = false"><strong>Error!</strong> {{vm.errorMsg}}</alert>
        </div>
    </div>

    <div class="row">
        <!-- Players -->
        <div class="col-lg-4">
            <div class="row">
                <div class="col-lg-12">
                    <h2>Players <small>Players in raid</small></h2>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <h3 class="panel-title">Active <span class="badge">{{vm.activePlayers.length}}</span></h3>
                        </div>
                        <table class="table table-striped table-condensed">
                            <tr>
                                <th>Name</th>
                                <th>EP</th>
                                <th>QP</th>
                                <th>Total EQ</th>
                                <th></th>
                            </tr>
                            <tr ng-repeat="player in vm.activePlayers | orderBy: 'ep'">
                                <td>{{player.player}}</td>
                                <td>{{player.ep}}</td>
                                <td>{{player.qp}}</td>
                                <td>{{player.totolEp}}</td>
                                <td>
                                    <div class="btn-group" role="group" aria-label="...">
                                        <button type="button" class="btn btn-success btn-xs" popover-template="'playerLootTemplate'" popover-title="Assign Loot to {{player.player}}" popover-append-to-body="true">Loot</button>
                                        <button type="button" class="btn btn-danger btn-xs" ng-click="vm.afkPlayer(player.player)">Afk</button>
                                        <button type="button" class="btn btn-info btn-xs" ng-click="vm.queuePlayer(player.player)">Queue</button>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <script type="text/ng-template" id="playerLootTemplate">

                <form class="form-horizontal">
                    <div class="form-group">
                        <label for="buyType" class="col-sm-2 control-label">Buy Type</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="buyType" ng-model="vm.selectedInstance" ng-options="instance.name for instance in vm.instances"></select>
                        </div>

                    </div>
                </form>

                <!--                http://tor.superhelt.org:8080/types/buytypes-->

            </script>

            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h3 class="panel-title">Queued <span class="badge">{{vm.queuedPlayers.length}}</span></h3>
                        </div>
                        <table class="table table-striped table-condensed">
                            <tr>
                                <th>Name</th>
                                <th>EP</th>
                                <th>QP</th>
                                <th>Total EQ</th>
                            </tr>
                            <tr ng-repeat="player in vm.queuedPlayers | orderBy: 'ep'">
                                <td>{{player.player}}</td>
                                <td>{{player.ep}}</td>
                                <td>{{player.qp}}</td>
                                <td>{{player.totolEp}}</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-danger">
                        <div class="panel-heading">
                            <h3 class="panel-title">Afk  <span class="badge">{{vm.afkPlayers.length}}</span></h3>
                        </div>
                        <table class="table table-striped table-condensed">
                            <tr>
                                <th>Name</th>
                                <th>EP</th>
                                <th>QP</th>
                                <th>Total EQ</th>
                            </tr>
                            <tr ng-repeat="player in vm.afkPlayers | orderBy: 'ep'">
                                <td>{{player.player}}</td>
                                <td>{{player.ep}}</td>
                                <td>{{player.qp}}</td>
                                <td>{{player.totolEp}}</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <h2>Inactive players <small>Players not in raid</small> <button class="btn btn-xs" type="button" ng-click='vm.isInactivePlayersCollapsed = !vm.isInactivePlayersCollapsed'>
                    <span class="glyphicon glyphicon-collapse-down" ng-show="vm.isInactivePlayersCollapsed"></span>
                    <span class="glyphicon glyphicon-collapse-up" ng-show="!vm.isInactivePlayersCollapsed"></span>
                    </button></h2>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <div collapse='vm.isInactivePlayersCollapsed'>
                        <div class="panel panel-warning">
                            <table class="table table-striped table-condensed">
                                <tr>
                                    <th>Name</th>
                                    <th>EP</th>
                                    <th>QP</th>
                                    <th>Total EQ</th>
                                    <th></th>
                                </tr>
                                <tr ng-repeat="player in vm.inactivePlayers | orderBy: 'ep'">
                                    <td>{{player.player}}</td>
                                    <td>{{player.ep}}</td>
                                    <td>{{player.qp}}</td>
                                    <td>{{player.totolEp}}</td>
                                    <td>
                                        <button class="btn btn-xs btn-success" type="button" ng-click="vm.addPlayerToRaid(player)"><span class="glyphicon glyphicon-plus"></span>
                                        </button>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Events -->
        <div class="col-lg-8">
            <div class="row">
                <div class="col-lg-12">
                    <h2>Events <small>Events occured related to raid</small></h2>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <h3 class="panel-title">Events</h3>
                        </div>
                        <table class="table table-striped table-condensed">
                            <tr>
                                <th>Date</th>
                                <th>Type</th>
                                <th>Players</th>
                                <th>Amount</th>
                                <th>Comment</th>
                                <th>Item</th>
                                <th></th>
                            </tr>
                            <tr ng-repeat="event in vm.events | orderBy: 'date'">
                                <td>{{event.date}}</td>
                                <td>{{event.type}}</td>
                                <td>{{event.players}}</td>
                                <td>{{event.amount}}</td>
                                <td>{{event.comment}}</td>
                                <td>{{event.itemName}}</td>
                                <td>
                                    <button type="button" class="btn btn-danger btn-xs" ng-click="vm.deleteEvent(event)"><span class="glyphicon glyphicon-remove"></span>
                                    </button>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <hr>

    <footer>
        <p>&copy; A Necessary Evil 2015</p>
    </footer>
</div>
<!-- /container -->